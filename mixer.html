
<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>音樂創作器 - 參數設定</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/piano_theme_child_1.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/mixer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Lora:wght@400;700&family=Space+Mono&display=swap" rel="stylesheet">
</head>
<body class="antialiased">
    <!-- Back Button & Language Switcher -->
    <div class="fixed top-4 left-4" style="z-index: 1000;">
        <a href="index.html" class="btn bg-secondary text-secondary-foreground font-bold py-2 px-4 rounded-lg text-sm">
            ← <span id="back-text">返回</span>
        </a>
    </div>
    <div class="lang-switcher">
        <button id="lang-toggle" class="btn bg-primary text-primary-foreground font-bold py-2 px-4 rounded-lg text-sm">
            English
        </button>
    </div>

    <!-- Parameter Selection Page (Music Mixer) -->
    <div class="flex flex-col items-center justify-center min-h-screen p-4">
        <h1 id="page-title" class="text-3xl font-bold mb-4 text-center">🎹 音樂創作器 🎹</h1>
        <div class="flex items-center justify-center mb-6 text-lg">
            <img src="https://placehold.co/80x80/FBBF24/3B0764?text=Bear" alt="友善的熊寶寶吉祥物" class="rounded-full border-2 border-foreground shadow-sm mr-4">
            <p id="mascot-text" class="p-3 bg-white rounded-lg shadow-md border-2 border-foreground">"調整參數來創作你的歌曲！"</p>
        </div>

        <!-- Feeling Selection -->
        <div class="w-full max-w-2xl text-center mb-8 p-6 bg-card rounded-lg border-2 border-foreground shadow-md">
            <h2 id="feeling-header" class="text-2xl font-bold mb-6">情緒</h2>
            <div class="grid grid-cols-4 gap-4">
                <button id="feeling-happy" class="feeling-btn btn p-6 rounded-lg bg-chart-1 text-primary-foreground flex flex-col items-center gap-2">
                    <span class="text-5xl">😄</span>
                    <span class="text-lg font-bold" data-i18n="happy">開心</span>
                </button>
                <button id="feeling-excited" class="feeling-btn btn p-6 rounded-lg bg-chart-2 text-primary-foreground flex flex-col items-center gap-2">
                    <span class="text-5xl">🤩</span>
                    <span class="text-lg font-bold" data-i18n="excited">興奮</span>
                </button>
                <button id="feeling-calm" class="feeling-btn btn p-6 rounded-lg bg-chart-3 text-accent-foreground flex flex-col items-center gap-2">
                    <span class="text-5xl">😌</span>
                    <span class="text-lg font-bold" data-i18n="calm">平靜</span>
                </button>
                <button id="feeling-sad" class="feeling-btn btn p-6 rounded-lg bg-chart-5 text-accent-foreground flex flex-col items-center gap-2">
                    <span class="text-5xl">💧</span>
                    <span class="text-lg font-bold" data-i18n="sad">悲傷</span>
                </button>
            </div>
        </div>

        <!-- Key Switches & Tempo Slider -->
        <div class="w-full max-w-2xl grid grid-cols-1 md:grid-cols-2 gap-6 px-4">
            <div class="text-center p-6 bg-card rounded-lg border-2 border-foreground shadow-md">
                <h2 id="key-header" class="text-2xl font-bold mb-6">調性</h2>
                <div class="flex justify-center items-center space-x-4">
                    <span class="text-5xl">☀️</span>
                    <label class="switch">
                        <input type="checkbox" id="key-switch">
                        <span class="slider round"></span>
                    </label>
                    <span class="text-5xl">🌙</span>
                </div>
            </div>
            <div class="text-center p-6 bg-card rounded-lg border-2 border-foreground shadow-md">
                <h2 id="speed-header" class="text-2xl font-bold mb-6">速度</h2>
                <div class="grid grid-cols-3 gap-3">
                    <button id="speed-slow" class="speed-btn btn bg-secondary text-secondary-foreground p-4 rounded-lg flex flex-col items-center gap-2">
                        <span class="text-4xl">🐢</span>
                        <span class="text-base font-bold" data-i18n="slow">慢</span>
                    </button>
                    <button id="speed-medium" class="speed-btn btn bg-primary text-primary-foreground p-4 rounded-lg flex flex-col items-center gap-2">
                        <span class="text-4xl">🏃</span>
                        <span class="text-base font-bold" data-i18n="medium">中</span>
                    </button>
                    <button id="speed-fast" class="speed-btn btn bg-destructive text-destructive-foreground p-4 rounded-lg flex flex-col items-center gap-2">
                        <span class="text-4xl">🐇</span>
                        <span class="text-base font-bold" data-i18n="fast">快</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- AI Prompt Preview Section -->
        <div class="w-full max-w-2xl mt-8 p-6 bg-card rounded-lg border-2 border-foreground shadow-md">
            <h2 id="prompt-header" class="text-2xl font-bold mb-4 text-center">🤖 AI 提示預覽</h2>
            <div class="p-4 bg-muted rounded-lg border-2 border-foreground font-mono text-sm">
                <p id="prompt-preview" class="whitespace-pre-wrap">請在上方選擇參數以生成 AI 提示...</p>
            </div>
        </div>

        <button id="make-music-btn" class="btn bg-accent text-accent-foreground font-bold py-4 px-8 rounded-full text-2xl mt-12">
            創作音樂！🎶
        </button>
    </div>

    <!-- Loading Screen Overlay -->
    <div id="loading-screen" class="fixed inset-0 bg-black bg-opacity-80 flex flex-col items-center justify-center z-50 hidden" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0, 0, 0, 0.8); flex-direction: column; align-items: center; justify-content: center; z-index: 50;">
        <div class="text-center">
            <div class="mb-8">
                <div class="animate-spin rounded-full h-32 w-32 border-8 border-white border-t-accent mx-auto" style="border-color: white; border-top-color: var(--accent);"></div>
            </div>
            <h2 id="loading-title" class="text-3xl font-bold mb-4 text-white" style="color: white;">🎵 AI 正在創作你的音樂... 🎵</h2>
            <div class="w-96 h-8 bg-gray-700 rounded-full border-2 border-white overflow-hidden mb-4" style="background-color: #374151; border-color: white;">
                <div id="progress-bar" class="h-full bg-accent transition-all duration-300" style="width: 0%"></div>
            </div>
            <p id="status-text" class="text-xl font-mono text-gray-300" style="color: #d1d5db;">初始化中...</p>
        </div>
    </div>


    <script src="js/translations.js"></script>
    <script src="js/mixer.js"></script>
</body>
</html>
